(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08cd0db5"],{"3ae9":function(e,t,o){},"40ea":function(e,t,o){"use strict";o("3ae9")},7266:function(e,t,o){"use strict";o("a33e")},"7e51":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"idPhotoEl",staticClass:"id-photo-wrapper"},[o("div",{staticClass:"div-body"},[o("el-row",{staticClass:"row-area"},[o("el-col",{staticClass:"col-photo",attrs:{span:16}},[o("el-row",{staticClass:"row-photo"},[o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[o("img",{staticClass:"img_photo",attrs:{src:e.leftPhotoSrc}})]),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[o("img",{staticClass:"img_photo",attrs:{src:e.rightPhotoSrc}})])],1),o("div",{staticClass:"div-upload"},[o("el-upload",{ref:"upload",staticClass:"btn-upload",attrs:{accept:".jpg, .jpeg, .png",action:e.uploadUrl,enctype:"multipart/form-data",limit:1,multiple:!1,"before-upload":e.beforeUpload,"on-exceed":e.outOfLimit,"on-success":e.importSuccess,"file-list":e.fileList,"auto-upload":!0}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传照片")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpeg、jpg、png文件")])],1),o("div",{staticClass:"div-select-color"},[o("div",{staticClass:"div-select-title"},[e._v(" 选择底色 ")]),o("div",{staticClass:"div-color-list div-list"},[o("div",{class:[0===e.makePhotoReq.color?e.divSelected:e.divColor,e.divWhite],on:{click:function(t){return e.setColor(0)}}}),o("div",{class:[1===e.makePhotoReq.color?e.divSelected:e.divColor,e.divRed],on:{click:function(t){return e.setColor(1)}}}),o("div",{class:[2===e.makePhotoReq.color?e.divSelected:e.divColor,e.divBlue],on:{click:function(t){return e.setColor(2)}}})])]),o("div",{staticClass:"div-select-size"},[o("div",{staticClass:"div-select-title"},[e._v(" 选择尺寸 ")]),o("div",{staticClass:"div-size-list div-list"},[o("el-radio-group",{model:{value:e.makePhotoReq.size,callback:function(t){e.$set(e.makePhotoReq,"size",t)},expression:"makePhotoReq.size"}},e._l(e.sizeList,(function(t,s){return o("el-radio",{key:s,staticStyle:{display:"block"},attrs:{label:t.label}},[e._v(e._s(t.value))])})),1)],1)]),o("div",{staticClass:"div-download"},[o("el-button",{staticClass:"btn-id-photo",attrs:{disabled:e.isBlank(e.makePhotoReq.img_id),type:"primary"},on:{click:e.makeIdPhotoClick}},[e._v("生成证件照")]),o("el-button",{staticClass:"btn-download",attrs:{disabled:e.isBlank(e.makePhotoReq.img_id)||e.isBlank(e.rightPhotoSrc),type:"primary"},on:{click:e.downloadFile}},[e._v("下载证件照")])],1)],1)],1)],1)],1)])},i=[],a=(o("34ef"),o("28a5"),o("7f7f"),o("db72"),o("6b54"),o("bc3a")),l=o.n(a),r=o("5c96"),n=l.a.create({baseURL:Object({VUE_APP_PROXY:"https://k72scvlt96.execute-api.ap-east-1.amazonaws.com/prod",NODE_ENV:"production",VUE_APP_WEB_VERSION:"1.0.0",VUE_APP_ERROR_MESSAGE_DEFAULT:"数据异样！",VUE_APP_ERROR_MESSAGE_403:"登录已过期或没有权限！",VUE_APP_ERROR_MESSAGE_404:"服务器找不到!",VUE_APP_ERROR_MESSAGE_500:"服务器错误！",VUE_APP_ERROR_MESSAGE_OTHER:"网络走神了，请稍后再试!",BASE_URL:""}).VUE_APP_BASE_API,timeout:6e4});n.post(),n.interceptors.request.use((function(e){return e.headers.customHeader="axios",e}),(function(e){return Promise.reject(e)})),n.interceptors.response.use((function(e){var t=e.data;if(console.log("拦截",t),0!==t.code){if(401===t.code)return void window.open(t.redirect,"_self");if(t.msg){var o=t.msg.length>50?"数据异样！":t.msg;r["Message"].closeAll(),Object(r["Message"])({message:o,type:"error",showClose:!0,duration:5e3})}return Promise.reject(t,e)}return t}),(function(e){var t="网络走神了，请稍后再试!",o=e.response&&e.response.status;return console.log("Error: Network Error"===e.toString()),403===o&&(t="登录已过期或没有权限！"),404===o&&(t="服务器找不到!"),o>=500&&(t="服务器错误！"),r["Message"].closeAll(),Object(r["Message"])({message:t,type:"error",showClose:!0,duration:5e3}),Promise.reject(e)}));var c=n;var d={make_id_photo:"https://k72scvlt96.execute-api.ap-east-1.amazonaws.com/prod/download_cert_image"};function u(e){return c({url:d.make_id_photo,method:"POST",data:e})}var p={name:"IdPhoto",data:function(){return{leftPhotoSrc:"",rightPhotoSrc:"",sizeList:[{label:0,value:"1⼨       295*413px"},{label:1,value:"⼤1⼨   389*566px"},{label:2,value:"⼩2⼨   413*531px"},{label:3,value:"2⼨       413*579px"},{label:4,value:"⼤2⼨    413*626px"},{label:-1,value:"原图大小"}],makePhotoReq:{size:0,color:0,img_id:null},uploadUrl:"https://k72scvlt96.execute-api.ap-east-1.amazonaws.com/prod/upload_image",fileList:[],idPhotoEl:null,fileName:"",divSelected:"div-selected",divColor:"div-color",divWhite:"div-white",divRed:"div-red",divBlue:"div-blue"}},mounted:function(){this.idPhotoEl=this.$refs["idPhotoEl"],console.log("url",this.uploadUrl)},methods:{isBlank:function(e){return this.$options.filters.isBlank(e)},importSuccess:function(e,t,o){0===e.code?(this.makePhotoReq.img_id=e.img_id,this.showLeftPhoto(t.raw),this.fileName=t.name.substring(0,t.name.lastIndexOf(".")),console.log(this.fileName),this.$message.success("上传成功")):this.$message.error(e.msg),this.$refs["upload"].clearFiles()},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1);return"jpg"===t||"jpeg"===t||"png"===t||(this.$message.error("上传文件只能是.jpg、.jpeg、.png格式!"),!1)},outOfLimit:function(e,t){this.$message.error("一次只能上传一张照片！照片上传中，请稍后...")},makeIdPhotoClick:function(){var e=this,t=this.$loading(this.idPhotoEl);u(this.makePhotoReq).then((function(t){console.log(t),e.rightPhotoSrc=t.img})).finally((function(){t.close()}))},setColor:function(e){this.makePhotoReq.color=e},downloadFile:function(){var e=document.createElement("a"),t=this.base64ToBlob(this.rightPhotoSrc),o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!0),e.download=this.fileName+"(证件照)",e.href=URL.createObjectURL(t),e.click()},base64ToBlob:function(e){for(var t=e.split(";base64,"),o=t[0].split(":")[1],s=window.atob(t[1]),i=s.length,a=new Uint8Array(i),l=0;l<i;++l)a[l]=s.charCodeAt(l);return new Blob([a],{type:o})},showLeftPhoto:function(e){var t="",o=new FileReader;o.readAsDataURL(e);var s=this;o.onload=function(e){t=this.result.substring(this.result.indexOf(",")+1),s.leftPhotoSrc="data:image/png;base64,"+t}}}},h=p,v=(o("40ea"),o("7266"),o("2877")),m=Object(v["a"])(h,s,i,!1,null,"7c0cb634",null);t["default"]=m.exports},a33e:function(e,t,o){}}]);